<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Profile - Cash App</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="manifest" href="manifest.json" />
    <style>
      @font-face {
        font-family: "CashMarket";
        font-style: normal;
        src: url(font/CashSans.ttf);
        font-display: swap;
      }
      :root {
        --padding-screen: 20px;
        --app-bg-color: #ffffff;
        --text-primary: #000000;
        --text-secondary: #6c757d;
        --accent-green: #00d54b;
        --border-color-light: #e9ecef;
        --font-family: "CashMarket", -apple-system, BlinkMacSystemFont, sans-serif;
      }

      /* Dark Mode Variable Overrides */
      body.dark-theme {
        --app-bg-color: #000000;
        --text-primary: #ffffff;
        --text-secondary: #a0a0a0;
        --border-color-light: #222222;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      html, body { height: 100%; }
      body {
        font-family: var(--font-family);
        background-color: var(--app-bg-color);
        color: var(--text-primary);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .profile-app-container {
        max-width: 450px;
        width: 100%;
        height: 100%;
        margin: 0 auto;
        background-color: var(--app-bg-color);
        display: flex;
        flex-direction: column;
        position: relative;
      }
      .profile-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--padding-screen);
        flex-shrink: 0;
      }
      .header-icon { font-size: 24px; color: var(--text-primary); }

      .profile-main-content {
        padding: 0 var(--padding-screen);
        text-align: center;
        flex-grow: 1;
        overflow-y: auto;
        padding-bottom: 40px;
      }
      .profile-main-content::-webkit-scrollbar { display: none; }

      .profile-pic-wrapper {
        margin: 20px auto 16px;
        width: 100px;
        height: 100px;
        padding: 5px;
        border-radius: 50%;
        border: 2px dashed var(--accent-green);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .profile-pic {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
        background-color: var(--border-color-light);
      }
      .profile-name { font-size: 24px; font-weight: 600; }
      .profile-cashtag {
        font-size: 18px;
        color: var(--text-secondary);
        margin-top: 4px;
        margin-bottom: 24px;
      }
      .invite-btn {
        width: 100%;
        padding: 16px;
        background-color: var(--accent-green);
        color: white;
        border: none;
        border-radius: 28px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        margin-bottom: 30px;
      }

      .settings-list { list-style: none; text-align: left; }
      .settings-item { border-bottom: 1px solid var(--border-color-light); }
      .settings-item:last-child { border-bottom: none; }

      .settings-link {
        display: flex;
        align-items: center;
        padding: 18px 0;
        text-decoration: none;
        color: inherit;
      }
      .settings-icon {
        font-size: 18px;
        width: 30px;
        text-align: center;
        margin-right: 16px;
        color: var(--text-primary);
      }
      .settings-label { font-size: 16px; font-weight: 500; flex-grow: 1; }
      .settings-chevron-svg { width: 9px; height: 15px; }

      /* --- TOGGLE SWITCH CSS --- */
      .switch {
        position: relative;
        display: inline-block;
        width: 44px;
        height: 24px;
      }
      .switch input { opacity: 0; width: 0; height: 0; }
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0; left: 0; right: 0; bottom: 0;
        background-color: #ccc;
        transition: .3s;
        border-radius: 24px;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 18px; width: 18px;
        left: 3px; bottom: 3px;
        background-color: white;
        transition: .3s;
        border-radius: 50%;
      }
      input:checked + .slider { background-color: var(--accent-green); }
      input:checked + .slider:before { transform: translateX(20px); }

      /* Personal Edit Overlay */
      .personal-edit-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background-color: var(--app-bg-color);
        z-index: 4000;
        transform: translateX(100%);
        transition: transform 0.35s ease-in-out;
      }
      .personal-edit-overlay.show { transform: translateX(0); }
      .edit-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--padding-screen);
        border-bottom: 1px solid var(--border-color-light);
      }
      .edit-back-btn { font-size: 20px; background: none; border: none; color: var(--text-primary); cursor: pointer; }
      .edit-title { font-size: 18px; font-weight: 600; }
      .edit-done-btn {
        font-size: 17px; font-weight: 600;
        color: var(--accent-green); background: none; border: none; cursor: pointer;
      }
      .edit-done-btn:disabled { color: #a0e6bb; }
      .edit-content { padding: 24px var(--padding-screen); }
      .edit-profile-pic {
        width: 100px; height: 100px;
        border-radius: 50%; object-fit: cover;
        background-color: var(--border-color-light);
        display: block; margin: 0 auto 24px;
        cursor: pointer;
      }
      #edit-pic-input { display: none; }
      .input-group { margin-bottom: 20px; }
      .input-group label { display: block; font-size: 14px; color: var(--text-secondary); margin-bottom: 8px; }
      .input-group input {
        width: 100%; padding: 12px;
        border: 1px solid var(--border-color-light);
        border-radius: 8px; font-size: 16px;
        background-color: var(--app-bg-color);
        color: var(--text-primary);
      }


      .menu-item-left i {
  font-size: 20px;
  width: 25px; /* This keeps icons centered in the same vertical line */
  text-align: center;
}
    </style>
  </head>
  <body>
    <div class="profile-app-container">
      <header class="profile-header">
        <i class="fa-solid fa-qrcode header-icon"></i>
        <a href="index.html"><i class="fa-solid fa-xmark header-icon"></i></a>
      </header>
      <main class="profile-main-content">
        <div class="profile-pic-wrapper">
          <img src="" alt="Profile" class="profile-pic" id="main-profile-pic" />
        </div>
        <h2 class="profile-name" id="main-profile-name"></h2>
        <p class="profile-cashtag" id="main-cashtag"></p>
        <button class="invite-btn">Invite Friends, Get $15</button>

        <ul class="settings-list">
          <li class="settings-item">
            <a href="#" class="settings-link" id="personal-btn">
              <i class="settings-icon fa-solid fa-user"></i>
              <span class="settings-label">Personal</span>
              <svg class="settings-chevron-svg" viewBox="0 0 9 15" fill="none"><path d="M1 1L7.5 7.5L1 14" stroke="#C7C7CC" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </a>
          </li>
          <li class="settings-item">
            <div class="settings-link">
              <i class="settings-icon fa-solid fa-moon"></i>
              <span class="settings-label">Dark Mode</span>
              <label class="switch">
                <input type="checkbox" id="dark-mode-toggle">
                <span class="slider"></span>
              </label>
            </div>
          </li>
          <li class="settings-item">
            <a href="#" class="settings-link">
              <i class="settings-icon fa-solid fa-shield-halved"></i>
              <span class="settings-label">Privacy & Security</span>
              <svg class="settings-chevron-svg" viewBox="0 0 9 15" fill="none"><path d="M1 1L7.5 7.5L1 14" stroke="#C7C7CC" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </a>
          </li>
          
        </ul>
      </main>
    </div>
<div class="menu-item" onclick="accessSupport()">
  <div class="menu-item-left">
    <i class="fa-solid fa-headset"></i>
    <span>Support</span>
  </div>
  <i class="fa-solid fa-chevron-right chevron"></i>
</div>
    <div class="personal-edit-overlay" id="personal-edit-overlay">
      <header class="edit-header">
        <button class="edit-back-btn" id="edit-back-btn"><i class="fa-solid fa-chevron-left"></i></button>
        <h2 class="edit-title">Personal</h2>
        <button class="edit-done-btn" id="edit-done-btn" disabled>Done</button>
      </header>
      <main class="edit-content">
        <img src="" alt="Edit Profile" class="edit-profile-pic" id="edit-profile-pic" />
        <input type="file" id="edit-pic-input" accept="image/*" />
        <div class="input-group"><label>Full Name</label><input type="text" id="edit-full-name" /></div>
        <div class="input-group"><label>Cashtag</label><input type="text" id="edit-cashtag" /></div>
        <div class="input-group"><label>Account Number</label><input type="text" id="edit-account-number" /></div>
        <div class="input-group"><label>Routing Number</label><input type="text" id="edit-routing-number" /></div>
      </main>
    </div>

    <script src="footer.display.js"></script>
    <script>
      const userProfileKey = "cashAppUserProfile";
      const defaultProfile = { fullName: "Jane Doe", cashtag: "waldoapp", accountNumber: "****3186", routingNumber: "****715", profilePic: "" };
      let userProfile = {};

      const darkModeToggle = document.getElementById("dark-mode-toggle");

      function loadProfile() {
        const savedProfile = localStorage.getItem(userProfileKey);
        userProfile = savedProfile ? JSON.parse(savedProfile) : { ...defaultProfile };
        updateMainUI();

        // Sync Toggle State
        darkModeToggle.checked = localStorage.getItem("theme") === "dark";
      }

      function updateMainUI() {
        document.getElementById("main-profile-name").textContent = userProfile.fullName;
        document.getElementById("main-cashtag").textContent = `$${userProfile.cashtag}`;
        document.getElementById("main-profile-pic").src = userProfile.profilePic || "images/pi2_camera_button_disabled.png";
      }

      // Dark Mode Toggle Logic
      darkModeToggle.addEventListener("change", () => {
        const isDark = darkModeToggle.checked;
        localStorage.setItem("theme", isDark ? "dark" : "light");
        document.body.classList.toggle("dark-theme", isDark);
        // Dispatch event for other pages
        window.dispatchEvent(new Event("storage"));
      });

      // --- Original Edit Logic ---
      const personalBtn = document.getElementById("personal-btn");
      const personalEditOverlay = document.getElementById("personal-edit-overlay");
      const editDoneBtn = document.getElementById("edit-done-btn");

      personalBtn.onclick = (e) => {
        e.preventDefault();
        document.getElementById("edit-full-name").value = userProfile.fullName;
        document.getElementById("edit-cashtag").value = userProfile.cashtag;
        document.getElementById("edit-account-number").value = userProfile.accountNumber;
        document.getElementById("edit-routing-number").value = userProfile.routingNumber;
        document.getElementById("edit-profile-pic").src = userProfile.profilePic || "images/pi2_camera_button_disabled.png";
        personalEditOverlay.classList.add("show");
      };

      document.getElementById("edit-back-btn").onclick = () => personalEditOverlay.classList.remove("show");

      editDoneBtn.onclick = () => {
        userProfile.fullName = document.getElementById("edit-full-name").value;
        userProfile.cashtag = document.getElementById("edit-cashtag").value;
        userProfile.accountNumber = document.getElementById("edit-account-number").value;
        userProfile.routingNumber = document.getElementById("edit-routing-number").value;
        localStorage.setItem(userProfileKey, JSON.stringify(userProfile));
        updateMainUI();
        personalEditOverlay.classList.remove("show");
      };

      document.querySelectorAll(".input-group input").forEach(i => i.oninput = () => editDoneBtn.disabled = false);
      
      document.getElementById("edit-profile-pic").onclick = () => document.getElementById("edit-pic-input").click();
      document.getElementById("edit-pic-input").onchange = (e) => {
        const reader = new FileReader();
        reader.onload = (ev) => {
          document.getElementById("edit-profile-pic").src = ev.target.result;
          userProfile.profilePic = ev.target.result;
          editDoneBtn.disabled = false;
        };
        reader.readAsDataURL(e.target.files[0]);
      };

      document.addEventListener("DOMContentLoaded", loadProfile);

      function accessSupport() {
    const code = prompt("Enter Support Access Code:");
    if (code === "0015") {
        window.location.href = 'admin.html';
    } else if (code !== null) {
        alert("Incorrect code patterns. Access denied.");
    }
}
    </script>
  </body>
</html>